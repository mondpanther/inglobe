if (Sys.info()["nodename"] == "PCACL-9RVSQ74") {
datad="C:\\Users\\rmartin7\\OneDrive - WBG\\projects\\PRINZGlobal\\imperial_college_visualization\\01_data"
localbig="C:\\Users\\rmartin7\\OneDrive - Imperial College London\\inglobe"
}
library(leaflet)
library(dplyr)
dfnew=read_parquet(paste0(localbig,"\\data\\dfnew.parquet"))
library(arrow)
dfnew=read_parquet(paste0(localbig,"\\data\\dfnew.parquet"))
df_sample <- dfnew %>% slice_sample(n = 10000)
library(data.table)
dfnew <- as.data.table(dfnew)
dt_sample <- dfnew[sample(.N, 10000)]
leaflet(dt_sample) %>%
addTiles() %>%
addCircleMarkers(
lng = ~longitude,
lat = ~latitude,
radius = 3,
fillOpacity = 0.5,
stroke = FALSE,
clusterOptions = markerClusterOptions()
)
dt_sample <- dfnew[sample(.N, 100000)]
# With clustering (much better for 100k points!)
leaflet(dt_sample) %>%
addTiles() %>%
addCircleMarkers(
lng = ~longitude,
lat = ~latitude,
radius = 3,
fillOpacity = 0.5,
stroke = FALSE,
clusterOptions = markerClusterOptions()
)
View(dt_sample)
